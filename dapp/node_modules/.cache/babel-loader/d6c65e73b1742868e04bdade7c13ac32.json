{"ast":null,"code":"var _jsxFileName = \"/home/pablo/Desktop/DAO/dapp/src/components/dao/Daolist/Daowatch.js\",\n  _s = $RefreshSig$();\nimport { drizzleReactHooks } from '@drizzle/react-plugin';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  useDrizzle,\n  useDrizzleState\n} = drizzleReactHooks;\nconst Daowatch = ({\n  DaoIndex\n}) => {\n  _s();\n  const {\n    useCacheCall\n  } = useDrizzle();\n  const drizzleState = useDrizzleState(state => state);\n  const address = drizzleState.accounts[0];\n  const balance = drizzleState.accountBalances[address];\n  const oz_states = ['Pending', 'Active', 'Canceled', 'Defeated', 'Succeeded', 'Queued', 'Expired', 'Executed'];\n\n  // Función para obtener el estado basado en el valor de propState\n  const getPropState = propState => {\n    return oz_states[propState] || 'Unknown'; // Devolvemos el estado correspondiente o 'Unknown' si no se encuentra\n  };\n\n  let {\n    addr,\n    datos,\n    propState\n  } = useCacheCall(['GovernorContract'], call => {\n    const addr = call('GovernorContract', 'proposes', DaoIndex);\n    const datos = addr && call('GovernorContract', 'datosPropose', addr);\n    const propState = addr && datos && call('GovernorContract', 'state', datos.id);\n    const proposalData = addr && datos && propState && call('GovernorContract', 'datosPropose', datos.id);\n    return {\n      addr,\n      datos,\n      propState\n    };\n  });\n\n  // Renderizar el elemento apropiado basado en propState\n  const renderActionElement = () => {\n    if (propState == 1 || propState == 0) {\n      // Estado \"Active\"\n      return /*#__PURE__*/_jsxDEV(Link, {\n        to: `/dao/${DaoIndex}`,\n        children: \"Votar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 14\n      }, this);\n    } else if (propState == 4) {\n      // Estado \"Succeeded\"\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: ejecutarPropuesta,\n        children: \"Ejecutar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 14\n      }, this);\n    } else {\n      return null;\n    }\n  };\n\n  // Función para ejecutar la propuesta (llamar a la función \"ejecutarPropuesta\" según tu contrato)\n  const ejecutarPropuesta = async () => {\n    try {\n      // Lógica para ejecutar la propuesta aquí, según el contrato\n      const proposeTx = drizzle.contracts.GovernorContract.methods.execute.cacheSend(datos.id, voto, cuadroTexto);\n    } catch (error) {\n      console.log('Error al ejecutar la propuesta:', error);\n    }\n  };\n\n  /*\n  \n  let { addr, datos, proposalData } = useCacheCall(\n      ['GovernorContract'],\n      (call) => {\n        const addr = call('GovernorContract', 'proposes', index);\n        const datos = addr && call('GovernorContract', 'datosPropose', addr);\n        const proposalData = addr && datos && call('GovernorContract', 'datosPropose', datos.id);\n        return { addr, datos, proposalData };\n      }\n    );\n  \n    // Función para manejar el envío del voto\n    const handleVotoSubmit = (event) => {\n      event.preventDefault();\n  \n      \n  \n        const proposeTx = drizzle.contracts.GovernorContract.methods.castVoteWithReason.cacheSend(datos.id,voto,cuadroTexto);\n  \n  \n        // Reiniciamos los estados para la próxima votación\n        setVoto(null);\n        setCuadroTexto(\"\");\n      }\n    };\n  \n  */\n\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n      children: [\"A\", /*#__PURE__*/_jsxDEV(\"sub\", {\n        children: DaoIndex\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: datos === null || datos === void 0 ? void 0 : datos.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: getPropState(propState)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: renderActionElement()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, 'Dao-' + DaoIndex, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n};\n_s(Daowatch, \"rj4PYN5ewvUm+WeqfUxZtYu0tc4=\", true, function () {\n  return [useDrizzle, useDrizzleState];\n});\n_c = Daowatch;\nexport default Daowatch;\nvar _c;\n$RefreshReg$(_c, \"Daowatch\");","map":{"version":3,"names":["drizzleReactHooks","Link","jsxDEV","_jsxDEV","useDrizzle","useDrizzleState","Daowatch","DaoIndex","_s","useCacheCall","drizzleState","state","address","accounts","balance","accountBalances","oz_states","getPropState","propState","addr","datos","call","id","proposalData","renderActionElement","to","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ejecutarPropuesta","proposeTx","drizzle","contracts","GovernorContract","methods","execute","cacheSend","voto","cuadroTexto","error","console","log","description","_c","$RefreshReg$"],"sources":["/home/pablo/Desktop/DAO/dapp/src/components/dao/Daolist/Daowatch.js"],"sourcesContent":["import { drizzleReactHooks } from '@drizzle/react-plugin';\nimport { Link } from 'react-router-dom';\n\nconst { useDrizzle, useDrizzleState } = drizzleReactHooks;\n\nconst Daowatch = ({ DaoIndex }) => {\n  const { useCacheCall } = useDrizzle();\n  const drizzleState = useDrizzleState((state) => state);\n\n  const address = drizzleState.accounts[0];\n  const balance = drizzleState.accountBalances[address];\n\n  \n\n  const oz_states = [\n    'Pending',\n    'Active',\n    'Canceled',\n    'Defeated',\n    'Succeeded',\n    'Queued',\n    'Expired',\n    'Executed',\n  ];\n\n  // Función para obtener el estado basado en el valor de propState\n  const getPropState = (propState) => {\n    return oz_states[propState] || 'Unknown'; // Devolvemos el estado correspondiente o 'Unknown' si no se encuentra\n  };\n\n  let { addr, datos, propState } = useCacheCall(\n    ['GovernorContract'],\n    (call) => {\n      const addr = call('GovernorContract', 'proposes', DaoIndex);\n      const datos = addr && call('GovernorContract', 'datosPropose', addr);\n      const propState = addr && datos && call('GovernorContract', 'state', datos.id);\n      const proposalData= addr && datos && propState && call('GovernorContract', 'datosPropose', datos.id);\n      return { addr, datos, propState };\n    }\n  );\n    \n    \n  // Renderizar el elemento apropiado basado en propState\n  const renderActionElement = () => {\n    if (propState == 1 || propState == 0) {\n      // Estado \"Active\"\n      return <Link to={`/dao/${DaoIndex}`}>Votar</Link>;\n    } \n    \n    else if (propState == 4) {\n      // Estado \"Succeeded\"\n      return <button onClick={ejecutarPropuesta}>Ejecutar</button>;\n    } else {\n      return (null);\n    }\n  };\n\n  // Función para ejecutar la propuesta (llamar a la función \"ejecutarPropuesta\" según tu contrato)\n  const ejecutarPropuesta = async () => {\n    try {\n      // Lógica para ejecutar la propuesta aquí, según el contrato\n      const proposeTx = drizzle.contracts.GovernorContract.methods.execute.cacheSend(datos.id,voto,cuadroTexto);\n\n\n    } catch (error) {\n      console.log('Error al ejecutar la propuesta:', error);\n    }\n  };\n\n\n\n\n/*\n\nlet { addr, datos, proposalData } = useCacheCall(\n    ['GovernorContract'],\n    (call) => {\n      const addr = call('GovernorContract', 'proposes', index);\n      const datos = addr && call('GovernorContract', 'datosPropose', addr);\n      const proposalData = addr && datos && call('GovernorContract', 'datosPropose', datos.id);\n      return { addr, datos, proposalData };\n    }\n  );\n\n  // Función para manejar el envío del voto\n  const handleVotoSubmit = (event) => {\n    event.preventDefault();\n\n    \n\n      const proposeTx = drizzle.contracts.GovernorContract.methods.castVoteWithReason.cacheSend(datos.id,voto,cuadroTexto);\n\n\n      // Reiniciamos los estados para la próxima votación\n      setVoto(null);\n      setCuadroTexto(\"\");\n    }\n  };\n\n*/\n\n\n\n  return (\n    <tr key={'Dao-' + DaoIndex}>\n      <th>A<sub>{DaoIndex}</sub></th>\n      <td>{datos?.description}</td>\n      <td>{getPropState(propState)}</td>\n      <td>{renderActionElement()}</td>\n    </tr>\n  );\n};\n\nexport default Daowatch;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}